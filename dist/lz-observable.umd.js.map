{"version":3,"file":"lz-observable.umd.js","sources":["../src/util.ts","../src/observable.ts"],"sourcesContent":["export const  getDataType  = (data: any): string =>{\n  return Object.prototype.toString.call(data).toLowerCase();\n}\n\n\nexport const isFunction = (data: any): boolean => getDataType(data) === '[object function]';\nexport const isObject = (data: any): boolean => getDataType(data) === '[object object]';\n","// Import here Polyfills if needed. Recommended core-js (npm i -D core-js)\n// import \"core-js/fn/array.find\"\n// ...\nimport { isFunction, isObject } from './util'\n\ninterface SubscriberInterface {\n  next: Function\n  complete?: Function\n  error?: Function\n}\ninterface AllInterface {\n  nextCb: Function[]\n  completeCb?: Function | null\n  errorCb?: Function | null\n}\ninterface FuncInterface {\n  (obj: SubscriberInterface): void\n}\n\nconst subscriber = (obj: SubscriberInterface): AllInterface => {\n  let objCb: AllInterface = {\n    nextCb: []\n  }\n  if (isObject(obj) && isFunction(obj.next)) {\n    objCb.nextCb.push(obj.next)\n  }\n  if (isObject(obj) && isFunction(obj.complete)) {\n    objCb.completeCb = obj.complete\n  }\n  if (isObject(obj) && isFunction(obj.error)) {\n    objCb.errorCb = obj.complete\n  }\n  return objCb\n  // run();\n}\nconst observable = (func: FuncInterface) => {\n  return (obj: SubscriberInterface) => {\n    let objCb: AllInterface = subscriber(obj)\n\n    const clearAll = () => {\n      objCb.errorCb = null\n      objCb.completeCb = null\n      objCb.nextCb = []\n    }\n    func({\n      next: (data: any) => {\n        objCb.nextCb.forEach(item => {\n          item(data)\n        })\n      },\n      complete: (data: any) => {\n        objCb.completeCb && objCb.completeCb(data)\n        clearAll()\n      },\n      error: (data: any) => {\n        objCb.errorCb && objCb.errorCb(data)\n        clearAll()\n      }\n    })\n  }\n}\n\nexport default observable\n"],"names":[],"mappings":";;;;;;EAAO,IAAO,WAAW,GAAI,UAAC,IAAS;MACrC,OAAO,MAAM,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,WAAW,EAAE,CAAC;EAC5D,CAAC,CAAA;AAGD,EAAO,IAAM,UAAU,GAAG,UAAC,IAAS,IAAc,OAAA,WAAW,CAAC,IAAI,CAAC,KAAK,mBAAmB,GAAA,CAAC;AAC5F,EAAO,IAAM,QAAQ,GAAG,UAAC,IAAS,IAAc,OAAA,WAAW,CAAC,IAAI,CAAC,KAAK,iBAAiB,GAAA,CAAC;;ECNxF;AACA,EAkBA,IAAM,UAAU,GAAG,UAAC,GAAwB;MAC1C,IAAI,KAAK,GAAiB;UACxB,MAAM,EAAE,EAAE;OACX,CAAA;MACD,IAAI,QAAQ,CAAC,GAAG,CAAC,IAAI,UAAU,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE;UACzC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,CAAA;OAC5B;MACD,IAAI,QAAQ,CAAC,GAAG,CAAC,IAAI,UAAU,CAAC,GAAG,CAAC,QAAQ,CAAC,EAAE;UAC7C,KAAK,CAAC,UAAU,GAAG,GAAG,CAAC,QAAQ,CAAA;OAChC;MACD,IAAI,QAAQ,CAAC,GAAG,CAAC,IAAI,UAAU,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE;UAC1C,KAAK,CAAC,OAAO,GAAG,GAAG,CAAC,QAAQ,CAAA;OAC7B;MACD,OAAO,KAAK,CAAA;;EAEd,CAAC,CAAA;EACD,IAAM,UAAU,GAAG,UAAC,IAAmB;MACrC,OAAO,UAAC,GAAwB;UAC9B,IAAI,KAAK,GAAiB,UAAU,CAAC,GAAG,CAAC,CAAA;UAEzC,IAAM,QAAQ,GAAG;cACf,KAAK,CAAC,OAAO,GAAG,IAAI,CAAA;cACpB,KAAK,CAAC,UAAU,GAAG,IAAI,CAAA;cACvB,KAAK,CAAC,MAAM,GAAG,EAAE,CAAA;WAClB,CAAA;UACD,IAAI,CAAC;cACH,IAAI,EAAE,UAAC,IAAS;kBACd,KAAK,CAAC,MAAM,CAAC,OAAO,CAAC,UAAA,IAAI;sBACvB,IAAI,CAAC,IAAI,CAAC,CAAA;mBACX,CAAC,CAAA;eACH;cACD,QAAQ,EAAE,UAAC,IAAS;kBAClB,KAAK,CAAC,UAAU,IAAI,KAAK,CAAC,UAAU,CAAC,IAAI,CAAC,CAAA;kBAC1C,QAAQ,EAAE,CAAA;eACX;cACD,KAAK,EAAE,UAAC,IAAS;kBACf,KAAK,CAAC,OAAO,IAAI,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,CAAA;kBACpC,QAAQ,EAAE,CAAA;eACX;WACF,CAAC,CAAA;OACH,CAAA;EACH,CAAC,CAAA;;;;;;;;"}