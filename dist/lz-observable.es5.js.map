{"version":3,"file":"lz-observable.es5.js","sources":["../src/util.ts","../src/observable.ts"],"sourcesContent":["export const  getDataType  = (data: any): string =>{\n  return Object.prototype.toString.call(data).toLowerCase();\n}\n\n\nexport const isFunction = (data: any): boolean => getDataType(data) === '[object function]';\nexport const isObject = (data: any): boolean => getDataType(data) === '[object object]';\n","// Import here Polyfills if needed. Recommended core-js (npm i -D core-js)\n// import \"core-js/fn/array.find\"\n// ...\nimport { isFunction, isObject } from './util'\n\ninterface SubscriberInterface  {\n  next: Function,\n  complete? : Function,\n  error? : Function,\n}\ninterface AllInterface {\n  nextCb: Function[],\n  completeCb?: Function|null,\n  errorCb?: Function|null,\n}\ninterface FuncInterface {\n  (obj:SubscriberInterface): void;\n}\n\nconst subscriber = (obj:SubscriberInterface,) : AllInterface=>{\n  let objCb:AllInterface ={\n    nextCb:[],\n  };\n  if (isObject(obj) && isFunction(obj.next)) {\n    objCb.nextCb.push(obj.next);\n  }\n  if (isObject(obj) && isFunction(obj.complete)) {\n    objCb.completeCb = obj.complete;\n  }\n  if (isObject(obj) && isFunction(obj.error)) {\n    objCb.errorCb = obj.complete;\n  }\n  return objCb;\n  // run();\n}\nconst observable = (func:FuncInterface) =>{\n  return {\n    subscriber:(obj:SubscriberInterface)=>{\n      let objCb:AllInterface = subscriber(obj);\n\n      const clearAll = () =>{\n        objCb.errorCb = null;\n        objCb.completeCb = null;\n        objCb.nextCb = [];\n      }\n      func({\n        next:(data: any)=>{\n          objCb.nextCb.forEach(item =>{\n            item(data);\n          });\n        },\n        complete:(data:any)=>{\n          objCb.completeCb && objCb.completeCb(data);\n          clearAll();\n        },\n        error: (data:any) =>{\n          objCb.errorCb && objCb.errorCb(data);\n          clearAll();\n        }\n      });\n    }\n  }\n}\n\nexport default observable\n"],"names":[],"mappings":"AAAO,IAAO,WAAW,GAAI,UAAC,IAAS;IACrC,OAAO,MAAM,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,WAAW,EAAE,CAAC;CAC3D,CAAA;AAGD,AAAO,IAAM,UAAU,GAAG,UAAC,IAAS,IAAc,OAAA,WAAW,CAAC,IAAI,CAAC,KAAK,mBAAmB,GAAA,CAAC;AAC5F,AAAO,IAAM,QAAQ,GAAG,UAAC,IAAS,IAAc,OAAA,WAAW,CAAC,IAAI,CAAC,KAAK,iBAAiB,GAAA,CAAC;;ACNxF;AACA,AAkBA,IAAM,UAAU,GAAG,UAAC,GAAuB;IACzC,IAAI,KAAK,GAAe;QACtB,MAAM,EAAC,EAAE;KACV,CAAC;IACF,IAAI,QAAQ,CAAC,GAAG,CAAC,IAAI,UAAU,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE;QACzC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;KAC7B;IACD,IAAI,QAAQ,CAAC,GAAG,CAAC,IAAI,UAAU,CAAC,GAAG,CAAC,QAAQ,CAAC,EAAE;QAC7C,KAAK,CAAC,UAAU,GAAG,GAAG,CAAC,QAAQ,CAAC;KACjC;IACD,IAAI,QAAQ,CAAC,GAAG,CAAC,IAAI,UAAU,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE;QAC1C,KAAK,CAAC,OAAO,GAAG,GAAG,CAAC,QAAQ,CAAC;KAC9B;IACD,OAAO,KAAK,CAAC;;CAEd,CAAA;AACD,IAAM,UAAU,GAAG,UAAC,IAAkB;IACpC,OAAO;QACL,UAAU,EAAC,UAAC,GAAuB;YACjC,IAAI,KAAK,GAAgB,UAAU,CAAC,GAAG,CAAC,CAAC;YAEzC,IAAM,QAAQ,GAAG;gBACf,KAAK,CAAC,OAAO,GAAG,IAAI,CAAC;gBACrB,KAAK,CAAC,UAAU,GAAG,IAAI,CAAC;gBACxB,KAAK,CAAC,MAAM,GAAG,EAAE,CAAC;aACnB,CAAA;YACD,IAAI,CAAC;gBACH,IAAI,EAAC,UAAC,IAAS;oBACb,KAAK,CAAC,MAAM,CAAC,OAAO,CAAC,UAAA,IAAI;wBACvB,IAAI,CAAC,IAAI,CAAC,CAAC;qBACZ,CAAC,CAAC;iBACJ;gBACD,QAAQ,EAAC,UAAC,IAAQ;oBAChB,KAAK,CAAC,UAAU,IAAI,KAAK,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;oBAC3C,QAAQ,EAAE,CAAC;iBACZ;gBACD,KAAK,EAAE,UAAC,IAAQ;oBACd,KAAK,CAAC,OAAO,IAAI,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;oBACrC,QAAQ,EAAE,CAAC;iBACZ;aACF,CAAC,CAAC;SACJ;KACF,CAAA;CACF,CAAA;;;;"}