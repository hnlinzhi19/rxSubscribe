{"version":3,"file":"lz-observable.es5.js","sources":["../src/util.ts","../src/observable.ts"],"sourcesContent":["export const  getDataType  = (data: any): string =>{\n  return Object.prototype.toString.call(data).toLowerCase();\n}\n\n\nexport const isFunction = (data: any): boolean => getDataType(data) === '[object function]';\nexport const isObject = (data: any): boolean => getDataType(data) === '[object object]';\n","// Import here Polyfills if needed. Recommended core-js (npm i -D core-js)\n// import \"core-js/fn/array.find\"\n// ...\nimport { isFunction, isObject } from './util'\n\ninterface SubscriberInterface {\n  next: Function\n  complete?: Function\n  error?: Function\n}\ninterface AllInterface {\n  nextCb: Function[]\n  completeCb?: Function | null\n  errorCb?: Function | null\n}\ninterface FuncInterface {\n  (obj: SubscriberInterface): void\n}\n\nconst subscriber = (obj: SubscriberInterface): AllInterface => {\n  let objCb: AllInterface = {\n    nextCb: []\n  }\n  if (isObject(obj) && isFunction(obj.next)) {\n    objCb.nextCb.push(obj.next)\n  }\n  if (isObject(obj) && isFunction(obj.complete)) {\n    objCb.completeCb = obj.complete\n  }\n  if (isObject(obj) && isFunction(obj.error)) {\n    objCb.errorCb = obj.complete\n  }\n  return objCb\n  // run();\n}\nconst observable = (func: FuncInterface) => {\n  return (obj: SubscriberInterface) => {\n    let objCb: AllInterface = subscriber(obj)\n\n    const clearAll = () => {\n      objCb.errorCb = null\n      objCb.completeCb = null\n      objCb.nextCb = []\n    }\n    func({\n      next: (data: any) => {\n        objCb.nextCb.forEach(item => {\n          item(data)\n        })\n      },\n      complete: (data: any) => {\n        objCb.completeCb && objCb.completeCb(data)\n        clearAll()\n      },\n      error: (data: any) => {\n        objCb.errorCb && objCb.errorCb(data)\n        clearAll()\n      }\n    })\n  }\n}\n\nexport default observable\n"],"names":[],"mappings":"AAAO,IAAO,WAAW,GAAI,UAAC,IAAS;IACrC,OAAO,MAAM,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,WAAW,EAAE,CAAC;CAC3D,CAAA;AAGD,AAAO,IAAM,UAAU,GAAG,UAAC,IAAS,IAAc,OAAA,WAAW,CAAC,IAAI,CAAC,KAAK,mBAAmB,GAAA,CAAC;AAC5F,AAAO,IAAM,QAAQ,GAAG,UAAC,IAAS,IAAc,OAAA,WAAW,CAAC,IAAI,CAAC,KAAK,iBAAiB,GAAA,CAAC;;ACNxF;AACA,AAkBA,IAAM,UAAU,GAAG,UAAC,GAAwB;IAC1C,IAAI,KAAK,GAAiB;QACxB,MAAM,EAAE,EAAE;KACX,CAAA;IACD,IAAI,QAAQ,CAAC,GAAG,CAAC,IAAI,UAAU,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE;QACzC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,CAAA;KAC5B;IACD,IAAI,QAAQ,CAAC,GAAG,CAAC,IAAI,UAAU,CAAC,GAAG,CAAC,QAAQ,CAAC,EAAE;QAC7C,KAAK,CAAC,UAAU,GAAG,GAAG,CAAC,QAAQ,CAAA;KAChC;IACD,IAAI,QAAQ,CAAC,GAAG,CAAC,IAAI,UAAU,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE;QAC1C,KAAK,CAAC,OAAO,GAAG,GAAG,CAAC,QAAQ,CAAA;KAC7B;IACD,OAAO,KAAK,CAAA;;CAEb,CAAA;AACD,IAAM,UAAU,GAAG,UAAC,IAAmB;IACrC,OAAO,UAAC,GAAwB;QAC9B,IAAI,KAAK,GAAiB,UAAU,CAAC,GAAG,CAAC,CAAA;QAEzC,IAAM,QAAQ,GAAG;YACf,KAAK,CAAC,OAAO,GAAG,IAAI,CAAA;YACpB,KAAK,CAAC,UAAU,GAAG,IAAI,CAAA;YACvB,KAAK,CAAC,MAAM,GAAG,EAAE,CAAA;SAClB,CAAA;QACD,IAAI,CAAC;YACH,IAAI,EAAE,UAAC,IAAS;gBACd,KAAK,CAAC,MAAM,CAAC,OAAO,CAAC,UAAA,IAAI;oBACvB,IAAI,CAAC,IAAI,CAAC,CAAA;iBACX,CAAC,CAAA;aACH;YACD,QAAQ,EAAE,UAAC,IAAS;gBAClB,KAAK,CAAC,UAAU,IAAI,KAAK,CAAC,UAAU,CAAC,IAAI,CAAC,CAAA;gBAC1C,QAAQ,EAAE,CAAA;aACX;YACD,KAAK,EAAE,UAAC,IAAS;gBACf,KAAK,CAAC,OAAO,IAAI,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,CAAA;gBACpC,QAAQ,EAAE,CAAA;aACX;SACF,CAAC,CAAA;KACH,CAAA;CACF,CAAA;;;;"}